%%
%% Set up abbreviations and definitions
\usepackage[acronym,
            toc=false,
            style=super,
            seeautonumberlist,
            nogroupskip=true]
            {glossaries-extra}
\setabbreviationstyle[acronym]{long-short}
\GlsXtrSetDefaultGlsOpts{noindex}
\renewcommand*\glspostdescription{\quad}
\preto\chapter{\glsresetall}
\makeglossaries
%% MRI
\newacronym{mri}{MRI}{magnetic resonance imaging}
\newacronym{nmr}{NMR}{nuclear magnetic resonance}
% Recursive acronym \protect solution from https://tex.stackexchange.com/a/502313
\newacronym{dmri}{dMRI}{diffusion-weighted \protect\ifglsused{mri}{MRI}{magnetic resonance imaging}}
\newacronym{imri}{iMRI}{intraoperative \protect\ifglsused{mri}{MRI}{magnetic resonance imaging}}
\newacronym{fmri}{fMRI}{functional \protect\ifglsused{mri}{MRI}{magnetic resonance imaging}}
\newacronym{hardi}{HARDI}{high angular resolution diffusion imaging}
\newacronym{epi}{EPI}{echo planar imaging}
\newacronym{rsepi}{RS-EPI}{readout-segmented \protect\ifglsused{epi}{EPI}{echo planar imaging}}
\newacronym{ssepi}{SS-EPI}{single-shot \protect\ifglsused{epi}{EPI}{echo planar imaging}}
\newacronym{rf}{RF}{radio frequency}
\newacronym{snr}{SNR}{signal to noise ratio}
\newacronym{fid}{FID}{free induction decay}
\newacronym{2dft}{2DFT}{two dimensional \protect\ifglsused{ft}{FT}{Fourier transform}}
\newacronym{ft}{FT}{Fourier transform}
\newacronym{fe}{FE}{frequency encoding}
\newacronym{pe}{PE}{phase encoding}
\newacronym[longplural={proton densities}]{pd}{PD}{proton density}
\newacronym{ir}{IR}{inversion recovery}
\newacronym{mprage}{MPRAGE}{magnetization prepared rapid gradient echo}
\newacronym{dce}{DCE}{dynamic contrast enhanced}
% Image computing
\newacronym{csd}{CSD}{constrained spherical deconvolution}
\newacronym{odf}{ODF}{orientation distribution function}
\newacronym{dodf}{dODF}{diffusion orientation distribution function}
\newacronym{fodf}{fODF}{fibre \protect\ifglsused{odf}{ODF}{orientation distribution function}}
\newacronym{fod}{FOD}{fibre orientation distribution}
\newacronym{tod}{TOD}{track orientation distribution}
\newacronym{dti}{DTI}{diffusion tensor imaging}
\newacronym{dt}{DT}{diffusion tensor}
\newacronym{fa}{FA}{fractional anisotropy}
\newacronym{dec}{DEC}{directionally encoded colour}
\newacronym{ssst}{SSST}{single-shell, single-tissue}
\newacronym{msmt}{MSMT}{multi-shell, multi-tissue}
\newacronym[longplural={regions of interest}]{roi}{ROI}{region of interest}
\newacronym{afd}{AFD}{apparent fibre density}
\newacronym{adc}{ADC}{apparent diffusion coefficient}
\newacronym{fact}{FACT}{fibre assignment by continuous tracking}
\newacronym{tdi}{TDI}{track density imaging}
\newacronym{mppca}{MPPCA}{Marchenko-Pastur principal component analysis}
%% Neuroanatomy
\newacronym{cns}{CNS}{central nervous system}
\newacronym{pns}{PNS}{peripheral nervous system}
\newacronym{bbb}{BBB}{blood-brain barrier}
\newacronym{cst}{CST}{corticospinal tract}
\newacronym{or}{OR}{optic radiation}
\newacronym[longplural={lateral geniculate nuclei}]{lgn}{LGN}{lateral geniculate nucleus}
\newacronym{ml}{ML}{Meyer's loop}
\newacronym[longplural={arcuate fasciculi}]{af}{AF}{arcuate fasciculus}
\newacronym[longplural={inferior fronto-occipital fasciculi}]{ifof}{IFOF}{inferior fronto-occipital fasciculus}
\newacronym[longplural={uncinate fasciculi}]{uf}{UF}{uncinate fasciculus}
\newacronym{wm}{WM}{white matter}
\newacronym{gm}{GM}{grey matter}
\newacronym{csf}{CSF}{cerebrospinal fluid}
\newacronym{crp}{CrP}{cerebellar peduncle}
\newacronym{cp}{CP}{cerebral peduncle}
\newacronym{cc}{CC}{corpus callosum}
\newacronym{ec}{EC}{external capsule}
\newacronym[longplural={superior longitudinal fasciculi}]{slf}{SLF}{superior longitudinal fasciculus}
\newacronym[longplural={superior fronto-occipital fasciculi}]{sfof}{SFOF}{superior fronto-occipital fasciculus}
\newacronym[longplural={vertical occipital fasciculi}]{vof}{VOF}{vertical occipital fasciculus}
\newacronym{ss}{SS}{sagittal stratum}
%% Neurosurgery & Neurology
\newacronym{dbs}{DBS}{deep brain stimulation}
\newacronym[longplural={extents of resection}]{eor}{EOR}{extent of resection}
\newacronym{gtr}{GTR}{gross total resection}
\newacronym{str}{STR}{subtotal resection}
\newacronym{hgg}{HGG}{high-grade glioma}
\newacronym{lgg}{LGG}{low-grade glioma}
\newacronym{eeg}{EEG}{electroencephalography}
\newacronym{ct}{CT}{computed tomography}
\newacronym{des}{DES}{direct electrical stimulation}
\newacronym{who}{WHO}{World Health Organisation}
%% Tractography et al.
\newacronym{tg}{TG}{tractography}
\newacronym{tgr}{TGR}{reference tractography}
\newacronym{tf}{TF}{tractfinder}
\newacronym{tsd}{TSD}{TractSeg DKFZ}
\newacronym{tsx}{TSX}{TractSeg XTRACT}
\newacronym{at}{AT}{atlas registration}
%% Other
\newacronym{hcp}{HCP}{human connectome project}
\newacronym{btc}{BTC}{Brain Tumour Connectomics}
\newacronym{dice}{DSC}{Dice-Soerensen similarity coefficient}
\newacronym{sh}{SH}{spherical harmonic}
\newacronym{fsl}{FSL}{FMRIB software library}
\newacronym{gosh}{GOSH}{Great Ormond Street Hospital}
\newacronym{nhnn}{NHNN}{National Hospital for Neurology and Neurosurgery}

%% Here we set up a new command to generate a list of abbreviations, e.g. for
%% float captions, formatted in a consistent way

% Define the separtors between abbreviation and definition, and between list items
% including any spaces!
\def\acrodefsep{ = }
\def\acrolistdelim{; }

% Process list of arbitratry length
\NewDocumentCommand{\acrolist}{>{\SplitList{,}}m}
    {\ProcessList{#1}{\acroformat}\firstitemtrue}
% Format the list using each item's glossary entry and the defined separators
\newif\iffirstitem
\firstitemtrue
\newcommand\acroformat[1]{%
  \iffirstitem
    \firstitemfalse
  \else
    \acrolistdelim %
  \fi
  \glsname{#1}\acrodefsep \glsdesc{#1}}
% ^ proper hangling of delimiter solution from https://tex.stackexchange.com/a/110906

%% Alternative solution from https://tex.stackexchange.com/a/110909 if the above causes issues
% \NewDocumentCommand{\acrolist}{>{\SplitList{,}}m}
%     {%
%     \def\acrodelim{\def\acrodelim{, }}%
%     \ProcessList{#1}{\acroformat} }
% \newcommand{\acroformat}[1]{\acrodelim\glsentryshort{#1} = \glsentrylong{#1}}
